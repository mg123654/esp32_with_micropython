## 简要概述
此规则文件针对 ESP32 MicroPython 项目，涵盖硬件交互、服务模块化和嵌入式开发的最佳实践。这些指导原则基于项目结构和常见模式，确保代码一致性、可维护性和硬件兼容性。

## 沟通风格
- 在讨论代码更改时，优先提供具体的技术细节而非抽象概念
- 当涉及硬件交互（如 I2C、SPI 设备）时，明确说明引脚配置和通信协议
- 对于 MicroPython 特定问题，直接引用 `machine`、`network` 等模块的文档
- 在建议更改时，考虑 ESP32 的内存限制和性能影响

## 开发工作流程
- 在修改硬件相关代码前，始终检查当前引脚配置和连接图
- 对 WiFi、OLED 等外设的配置使用单独的配置文件（如 `wifi_config.json`）
- 服务模块（如 `*_service.py`）应保持单一职责，提供清晰的公共接口
- 测试代码时，优先使用模拟硬件或条件执行以避免实际硬件依赖
- 使用 `urequests` 进行网络请求时，注意异常处理和超时设置

## 编码最佳实践
- 遵循 MicroPython 的命名约定：模块名小写，类名驼峰，常量全大写
- 硬件初始化代码（如 I2C、SPI）应集中管理，避免多处重复
- 使用异步或非阻塞模式处理网络操作和传感器读取
- 对于 OLED 显示操作，封装常用功能（文本、图形）到可重用类中
- 配置参数应从外部文件（JSON）或环境变量读取，避免硬编码
- 错误处理应详细记录到串口或文件，便于调试嵌入式设备

## 项目上下文
- 核心功能：WiFi 连接、OLED 显示、时间同步、Web 配置界面、DeepSeek API 集成
- 硬件平台：ESP32 开发板，可能配备 SSD1306 OLED 显示屏
- 主要依赖：MicroPython 标准库、`urequests`、`ssd1306.py` 驱动
- 项目结构：主入口 `main.py`，服务模块分离，配置与业务逻辑分离
- Git 远程仓库：https://github.com/mg123654/esp32_with_micropython.git

## 其他指导原则
- 优先使用 MicroPython 的内置库而非自定义实现，以节省闪存空间
- 对于时间敏感操作（如传感器采样），使用硬件定时器而非软件延迟
- 网络服务应支持 AP 和 STA 模式，提供配置回退机制
- 显示内容应考虑 OLED 的分辨率（通常 128x64）和单色限制
- 深度集成的 API 调用应有速率限制和故障恢复策略
- 代码应兼容常见的 ESP32 变体（如 ESP32-WROOM、ESP32-S3）
